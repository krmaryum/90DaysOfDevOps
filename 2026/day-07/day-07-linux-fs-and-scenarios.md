# Day 07 – Linux File System Hierarchy & Scenario-Based Practice
## Part 1: Linux File System Hierarchy

Linux follows a single-root directory structure, meaning everything starts from /.
---
## / (root)
- The top-level directory; all other directories branch from here.
- System cannot function without it.

### Sample contents `ls -l /`:

- bin/, etc/, home/, var/

I would use this when…
- I want to understand the overall structure of the system or navigate to any directory.

## /home
- Contains home directories for normal users.
- Each user has their own workspace here.
### Sample contents `ls -l /home`:
#### ubuntu/, khan/
I would use this when…
I’m managing user files, scripts, or permissions.

## /etc

Stores system-wide configuration files.

Almost every service has a config file here.

Sample contents `ls -l /etc`:

hostname, hosts, ssh/

I would use this when…
I need to configure or troubleshoot system services.

## /var/log

Contains log files generated by the system and services.

Critical for debugging and monitoring.

Sample contents `ls -l /var/log`:

syslog, auth.log, kern.log

I would use this when…
Something breaks and I need to investigate what happened.

## /tmp

Temporary files created by applications.

Usually cleared on reboot.

Sample contents `ls -l /tmp`:

tmp1234, systemd-private-*

I would use this when…
I need short-lived storage for scripts or testing.

---
# Scenario 2: High CPU Usage
```text
Your manager reports that the application server is slow.
You SSH into the server. What commands would you run to identify
which process is using high CPU?
```
## 1. top (the classic, always first)
```bash
top
```
- Shows real-time CPU usage
- Processes are sorted by CPU by default
- Look at:
  - %CPU
  - Load average (top right)
  - Press P to re-sort by CPU if needed

If one process is clearly spiking CPU, this is culprit.

## 2. ps (quick snapshot, non-interactive)
```bash
ps -eo pid,ppid,cmd,%cpu,%mem --sort=-%cpu | head
```
```text
 PID    PPID %CPU %MEM COMMAND
   1521    1018  100  0.2 yes
    557       1  0.0  4.1 snapd
    554       1  0.0  2.1 amazon-ssm-agen
      1       0  0.0  1.4 systemd
```
- Lists processes sorted by CPU (highest first)
- pid helps you trace or kill later

## 5. Drill down into a specific PID
Once you find a suspicious PID:
```bash
ps -fp 1521
```
Output:
```text
UID          PID    PPID  C STIME TTY          TIME CMD
ubuntu      1521    1018 99 07:13 pts/0    00:01:58 yes
```
or
```bash
top -p 1521
```
Output:
```text
top - 07:22:04 up  3:27,  1 user,  load average: 1.00, 0.85, 0.46
Tasks:   1 total,   1 running,   0 sleeping,   0 stopped,   0 zombie
%Cpu(s): 29.3 us, 18.8 sy,  0.0 ni, 50.0 id,  0.0 wa,  0.0 hi,  0.0 si,  1.8 st
MiB Mem :    914.2 total,    267.1 free,    368.0 used,    436.8 buff/cache
MiB Swap:      0.0 total,      0.0 free,      0.0 used.    546.2 avail Mem

    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
   1521 ubuntu    20   0    6112   1912   1792 R 100.0   0.2   8:58.29 yes
```

This tells you what the process actually is (Java app, Node, Python, etc.).

# Scenario 3: File Permissions Issue
```text
A script at /home/user/backup.sh is not executing.
When you run it: ./backup.sh
You get: "Permission denied"

What commands would you use to fix this?
```
```text
1. Check the file permissions
ls -l /home/user/backup.sh
likely see something like:
-rw-r--r-- 1 user user 1234 backup.sh
Notice there’s no x (execute) permission.
2. Add execute permission
chmod +x /home/user/backup.sh
3. Verify permissions
ls -l /home/user/backup.sh
Now it should look like:
-rwxr--r-- 1 user user 1234 backup.sh
4. Run the script again
./backup.sh
```